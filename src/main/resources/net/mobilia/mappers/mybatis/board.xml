<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
 <mapper namespace="Board">
 
 <!-- 검색 전후 게시글 개수 구하기 -->
 <select id="board_count" resultType="int">
  select count(board_no) from board
  <where>
   <if test="find_field == ''"></if>
   <if test="find_field == 'board_name'">
    board_name like #{find_name}
   </if>
   <if test="find_field == 'board_title'">
    board_title like #{find_name}
   </if>
   <if test="find_field == 'board_cont'">
    board_cont like #{find_name}
   </if>
  </where>
 </select>
 
 <!-- 검색전후  게시글 목록 -->
 <select id="board_list" resultType="board">
  select * from (select rowNum rNum,board_no,board_name,board_state,board_title,
  board_cont,board_pwd,board_hit,reply_cnt,board_date,update_date from
  (select * from board
  <where>
   <if test="find_field == ''"></if>
   <if test="find_field == 'board_name'">
    board_name like #{find_name}
   </if>
   <if test="find_field == 'board_title'">
    board_title like #{find_name}
   </if>
   <if test="find_field == 'board_cont'">
    board_cont like #{find_name}
   </if>
  </where>
   order by board_no desc))
   where rNum &gt;= #{startrow} and rNum &lt;= #{endrow}
 </select>
 
 <insert id="board_insert">
  insert into board (board_no, board_name, board_state, board_title, board_cont, board_date)
  values(board_no_seq.nextval,#{board_name},#{board_state},#{board_title},#{board_cont},sysdate)
 </insert>
 </mapper>